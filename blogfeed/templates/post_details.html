{% extends 'base.html' %}

{% block title %}
{{ post.title }}
{% endblock %}

{% block content %}
<ul>
  <h1>{{ post.title }}</h1>
  <br />
  <a href="{% url 'category' post.category|slugify %}">{{ post.category }}</a>

  <p>by {{ post.author.first_name }} {{ post.author.last_name }} / {{ post.post_date }}</p>
  <hr>
  {% if post.header_image %}
  <img src="{{ post.header_image.url }}" style="max-width: 50%;">
  {% endif %}
  <p>{{ post.body | safe }}</p>
  <span><b>{{ total_likes }} Likes</b></span>

  {% if user.is_authenticated %}
  <form action="{% url 'post_like' post.pk %}" method="POST">
    {% csrf_token %}
    {% if liked %}
    <button type="submit" , name="post_id" value="{{ post.id }}" class="btn btn-danger">UnLike</button>
    {% else %}
    <button type="submit" , name="post_id" value="{{ post.id }}" class="btn btn-primary">Like</button>
    {% endif %}
  </form>
  <br />
  {% if user.id == post.author.id %}
  <button href="{% url 'post_update' post.pk %}" class="btn btn-primary">Update</button>
  <button href="{% url 'post_delete' post.pk %}" class="btn btn-danger">Delete</button>
  <br />
  {% endif %}
  {% endif %}
  <br />
  <a href="{% url 'home' %}" class="btn btn-secondary">Back to Home</a>
</ul>
{% endblock %}